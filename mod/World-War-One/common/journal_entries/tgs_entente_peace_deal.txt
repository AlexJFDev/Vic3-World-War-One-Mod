je_entente_peace_deal_round_1 = { #Round 1: is Germany dislocated ?

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_crises
    
	is_shown_when_inactive = {
	  has_variable = entente_participant
	  NOT = {
			has_global_variable = entente_deal_round_1_germany_dislocation_prop_1_won
            has_global_variable = entente_deal_round_1_germany_dislocation_prop_2_won
            has_global_variable = entente_deal_round_1_germany_dislocation_prop_3_won
			has_global_variable = entente_deal_round_1_complete
		}
	}

    possible = { 
	   has_variable = entente_participant
	   country_rank >= rank_value:great_power
	    NOT = {
		    OR = {
			 has_law = law_type:law_council_republic
			 country_has_primary_culture = cu:japanese
			 country_has_primary_culture = cu:han
			 has_global_variable = entente_deal_round_1_germany_dislocation_prop_1_won
             has_global_variable = entente_deal_round_1_germany_dislocation_prop_2_won
             has_global_variable = entente_deal_round_1_germany_dislocation_prop_3_won
		    }
	    }
	  c:GER = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
      c:AUS = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
	}
    
    scripted_button = partition_1_button #Westphalia + Hanover + Saxony + Bavaria becomes independent
    scripted_button = partition_2_button #Westphalia + Hanover + Saxony + Bavaria becomes puppets of Germany
    scripted_button = partition_3_button #No dislocation

    immediate = {
		trigger_event = { id = entente_peace_deal.1 popup = yes }
		set_global_variable = entente_victory

		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_1_germany_dislocation_prop_1 }
			}
			set_global_variable = {
				name = entente_deal_round_1_germany_dislocation_prop_1
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_1_germany_dislocation_prop_2 }
			} 
			set_global_variable = {
				name = entente_deal_round_1_germany_dislocation_prop_2
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_1_germany_dislocation_prop_3 }
			}
			set_global_variable = {
				name = entente_deal_round_1_germany_dislocation_prop_3
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_peace_deal_timer_round_1 }
			}
			set_global_variable = {
				name = entente_peace_deal_timer_round_1
				value = 12
			}
		}
    }

    complete = {
        OR = {
         has_global_variable = entente_deal_round_1_germany_dislocation_prop_1_won
         has_global_variable = entente_deal_round_1_germany_dislocation_prop_2_won
         has_global_variable = entente_deal_round_1_germany_dislocation_prop_3_won
        }
    }

    on_complete = {
        set_global_variable = entente_deal_round_1_complete
        If = { 
		  limit = { 
			c:FRA ?= this
		  }
		   c:GER = {
            trigger_event = {
                id = entente_peace_deal.2
                days = 5
            }
           }
		}
    }

    on_monthly_pulse = {
        effect = {
            if = {
				limit = { 
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_1 >= 1
				}
				change_global_variable = {
					name = entente_peace_deal_timer_round_1
					add = -1
				}
			}
			if = {
				limit = {
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_1 <= 0
				}
				if = {
					limit = {
						NOT = {
							has_global_variable = entente_deal_round_1_germany_dislocation_prop_1_won
							has_global_variable = entente_deal_round_1_germany_dislocation_prop_2_won
							has_global_variable = entente_deal_round_1_germany_dislocation_prop_3_won
						}
					}
					if = {
						limit = {
							global_var:entente_deal_round_1_germany_dislocation_prop_1 > global_var:entente_deal_round_1_germany_dislocation_prop_2
							global_var:entente_deal_round_1_germany_dislocation_prop_1 > global_var:entente_deal_round_1_germany_dislocation_prop_3
						}
						set_global_variable = entente_deal_round_1_germany_dislocation_prop_1_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_1_germany_dislocation_prop_2 > global_var:entente_deal_round_1_germany_dislocation_prop_1
							global_var:entente_deal_round_1_germany_dislocation_prop_2 > global_var:entente_deal_round_1_germany_dislocation_prop_3
						}
						set_global_variable = entente_deal_round_1_germany_dislocation_prop_2_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_1_germany_dislocation_prop_3 > global_var:entente_deal_round_1_germany_dislocation_prop_1
							global_var:entente_deal_round_1_germany_dislocation_prop_3 > global_var:entente_deal_round_1_germany_dislocation_prop_2
						}
						set_global_variable = entente_deal_round_1_germany_dislocation_prop_3_won
					}
					else_if = { #Tiebreak
						limit = {
							global_var:entente_deal_round_1_germany_dislocation_prop_1 = global_var:entente_deal_round_1_germany_dislocation_prop_2
							global_var:entente_deal_round_1_germany_dislocation_prop_1 = global_var:entente_deal_round_1_germany_dislocation_prop_3
							global_var:entente_deal_round_1_germany_dislocation_prop_2 = global_var:entente_deal_round_1_germany_dislocation_prop_3
						}
						set_global_variable = entente_deal_round_1_germany_dislocation_prop_3_won
					}
				}
			}
        }
    }

    weight = 100

	should_be_pinned_by_default = yes 
}

je_entente_peace_deal_round_2 = { #Round 2: how big is German war reparation

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_crises
    
	is_shown_when_inactive = {
	  has_variable = entente_participant
	  NOT = {
			has_global_variable = entente_deal_round_2_germany_war_rep_prop_1_won
            has_global_variable = entente_deal_round_2_germany_war_rep_prop_2_won
            has_global_variable = entente_deal_round_2_germany_war_rep_prop_3_won
			has_global_variable = entente_deal_round_2_complete
		}
	}

    possible = { 
	   has_variable = entente_participant
	   country_rank >= rank_value:great_power
	    NOT = {
		    OR = {
			 has_law = law_type:law_council_republic
			 country_has_primary_culture = cu:japanese
			 country_has_primary_culture = cu:han
			 has_global_variable = entente_deal_round_2_germany_war_rep_prop_1_won
             has_global_variable = entente_deal_round_2_germany_war_rep_prop_2_won
             has_global_variable = entente_deal_round_2_germany_war_rep_prop_3_won
		    }
	    }
	  c:GER = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
      c:AUS = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
	}
    
    scripted_button = war_rep_1_button 
    scripted_button = war_rep_2_button 
    scripted_button = war_rep_3_button 

    immediate = {
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_2_germany_war_rep_prop_1 }
			}
			set_global_variable = {
				name = entente_deal_round_2_germany_war_rep_prop_1
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_2_germany_war_rep_prop_2 }
			} 
			set_global_variable = {
				name = entente_deal_round_2_germany_war_rep_prop_2
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_2_germany_war_rep_prop_3 }
			}
			set_global_variable = {
				name = entente_deal_round_2_germany_war_rep_prop_3
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_peace_deal_timer_round_2 }
			}
			set_global_variable = {
				name = entente_peace_deal_timer_round_2
				value = 12
			}
		}
    }

    complete = {
        OR = {
         has_global_variable = entente_deal_round_2_germany_war_rep_prop_1_won
         has_global_variable = entente_deal_round_2_germany_war_rep_prop_2_won
         has_global_variable = entente_deal_round_2_germany_war_rep_prop_3_won
        }
    }

    on_complete = {
        set_global_variable = entente_deal_round_2_complete
        If = { 
		  limit = { 
			c:FRA ?= this
		  }
		   c:GER = {
            trigger_event = {
                id = entente_peace_deal.3
                days = 5
            }
           }
		}
    }

    on_monthly_pulse = {
        effect = {
            if = {
				limit = { 
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_2 >= 1
				}
				change_global_variable = {
					name = entente_peace_deal_timer_round_2
					add = -1
				}
			}
			if = {
				limit = {
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_2 <= 0
				}
				if = {
					limit = {
						NOT = {
							 has_global_variable = entente_deal_round_2_germany_war_rep_prop_1_won
                             has_global_variable = entente_deal_round_2_germany_war_rep_prop_2_won
                             has_global_variable = entente_deal_round_2_germany_war_rep_prop_3_won
						}
					}
					if = {
						limit = {
							global_var:entente_deal_round_2_germany_war_rep_prop_1 > global_var:entente_deal_round_2_germany_war_rep_prop_2
							global_var:entente_deal_round_2_germany_war_rep_prop_1 > global_var:entente_deal_round_2_germany_war_rep_prop_3
						}
						set_global_variable = entente_deal_round_2_germany_war_rep_prop_1_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_2_germany_war_rep_prop_2 > global_var:entente_deal_round_2_germany_war_rep_prop_1
							global_var:entente_deal_round_2_germany_war_rep_prop_2 > global_var:entente_deal_round_2_germany_war_rep_prop_3
						}
						set_global_variable = entente_deal_round_2_germany_war_rep_prop_2_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_2_germany_war_rep_prop_3 > global_var:entente_deal_round_2_germany_war_rep_prop_1
							global_var:entente_deal_round_2_germany_war_rep_prop_3 > global_var:entente_deal_round_2_germany_war_rep_prop_2
						}
						set_global_variable = entente_deal_round_2_germany_war_rep_prop_3_won
					}
					else_if = { #Tiebreak
						limit = {
							global_var:entente_deal_round_2_germany_war_prop_1 = global_var:entente_deal_round_2_germany_war_prop_2
							global_var:entente_deal_round_2_germany_war_prop_1 = global_var:entente_deal_round_2_germany_war_prop_3
							global_var:entente_deal_round_2_germany_war_prop_2 = global_var:entente_deal_round_2_germany_war_prop_3
						}
						set_global_variable = entente_deal_round_2_germany_war_prop_2_won
					}
				}
			}
        }
    }

    weight = 100

	should_be_pinned_by_default = yes 
}

je_entente_peace_deal_round_3 = { #Round 3: how big Poland becomes ?

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_crises
    
	is_shown_when_inactive = {
	  has_variable = entente_participant
	  NOT = {
			has_global_variable = entente_deal_round_3_how_big_poland_prop_1_won
            has_global_variable = entente_deal_round_3_how_big_poland_prop_2_won
            has_global_variable = entente_deal_round_3_how_big_poland_prop_3_won
			has_global_variable = entente_deal_round_2_complete
		}
	}

    possible = { 
	   has_global_variable = russian_revolution_2
	   has_variable = entente_participant
	   country_rank >= rank_value:great_power
	    NOT = {
		    OR = {
			 has_law = law_type:law_council_republic
			 country_has_primary_culture = cu:japanese
			 country_has_primary_culture = cu:han
			 has_global_variable = entente_deal_round_3_how_big_poland_prop_1_won
             has_global_variable = entente_deal_round_3_how_big_poland_prop_2_won
             has_global_variable = entente_deal_round_3_how_big_poland_prop_3_won
		    }
	    }
	  c:GER = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
      c:AUS = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
	}
    
    scripted_button = how_big_poland_1_button 
    scripted_button = how_big_poland_2_button 
    scripted_button = how_big_poland_3_button 

    immediate = {
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_3_how_big_poland_prop_1 }
			}
			set_global_variable = {
				name = entente_deal_round_3_how_big_poland_prop_1
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_3_how_big_poland_prop_2 }
			} 
			set_global_variable = {
				name = entente_deal_round_3_how_big_poland_prop_2
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_3_how_big_poland_prop_3 }
			}
			set_global_variable = {
				name = entente_deal_round_3_how_big_poland_prop_3
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_peace_deal_timer_round_3 }
			}
			set_global_variable = {
				name = entente_peace_deal_timer_round_3
				value = 12
			}
		}
    }

    complete = {
        OR = {
         has_global_variable = entente_deal_round_3_how_big_poland_prop_1_won
         has_global_variable = entente_deal_round_3_how_big_poland_prop_2_won
         has_global_variable = entente_deal_round_3_how_big_poland_prop_3_won
		 has_global_variable = entente_deal_round_3_complete
        }
    }

    on_complete = {
        set_global_variable = entente_deal_round_3_complete
        If = { 
		  limit = { 
			c:FRA ?= this
		  }
		   c:FRA = {
            trigger_event = {
                id = entente_peace_deal.4
                days = 5
            }
           }
		}
    }

    on_monthly_pulse = {
        effect = {
            if = {
				limit = { 
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_3 >= 1
				}
				change_global_variable = {
					name = entente_peace_deal_timer_round_3
					add = -1
				}
			}
			if = {
				limit = {
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_3 <= 0
				}
				if = {
					limit = {
						NOT = {
							 has_global_variable = entente_deal_round_3_how_big_poland_prop_1_won
                             has_global_variable = entente_deal_round_3_how_big_poland_prop_2_won
                             has_global_variable = entente_deal_round_3_how_big_poland_prop_3_won
						}
					}
					if = {
						limit = {
							global_var:entente_deal_round_3_how_big_poland_prop_1 > global_var:entente_deal_round_3_how_big_poland_prop_2
							global_var:entente_deal_round_3_how_big_poland_prop_1 > global_var:entente_deal_round_3_how_big_poland_prop_3
						}
						set_global_variable = entente_deal_round_3_how_big_poland_prop_1_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_3_how_big_poland_prop_2 > global_var:entente_deal_round_3_how_big_poland_prop_1
							global_var:entente_deal_round_3_how_big_poland_prop_2 > global_var:entente_deal_round_3_how_big_poland_prop_3
						}
						set_global_variable = entente_deal_round_3_how_big_poland_prop_2_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_3_how_big_poland_prop_3 > global_var:entente_deal_round_3_how_big_poland_prop_1
							global_var:entente_deal_round_3_how_big_poland_prop_3 > global_var:entente_deal_round_3_how_big_poland_prop_2
						}
						set_global_variable = entente_deal_round_3_how_big_poland_prop_3_won
					}
					else_if = { #Tiebreak
						limit = {
							global_var:entente_deal_round_3_how_big_poland_prop_1 = global_var:entente_deal_round_3_how_big_poland_prop_2
							global_var:entente_deal_round_3_how_big_poland_prop_1 = global_var:entente_deal_round_3_how_big_poland_prop_3
							global_var:entente_deal_round_3_how_big_poland_prop_2 = global_var:entente_deal_round_3_how_big_poland_prop_3
						}
						set_global_variable = entente_deal_round_3_how_big_poland_prop_2_won
					}
				}
			}
        }
    }

    weight = 100

	should_be_pinned_by_default = yes 
}

je_entente_peace_deal_round_4 = { #Round 4: does Italy takes iredentist states from Austria ?

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_crises
    
	is_shown_when_inactive = {
	  has_variable = entente_participant
	  NOT = {
			has_global_variable = entente_deal_round_4_italy_iredentist_prop_1_won
            has_global_variable = entente_deal_round_4_italy_iredentist_prop_2_won
            has_global_variable = entente_deal_round_4_italy_iredentist_prop_3_won
			has_global_variable = entente_deal_round_4_complete
		}
		c:ITA = {
          has_variable = entente_participant
		}
	}

    possible = { 
	   has_variable = entente_participant
	   country_rank >= rank_value:great_power
	    NOT = {
		    OR = {
			 has_law = law_type:law_council_republic
			 country_has_primary_culture = cu:japanese
			 country_has_primary_culture = cu:han
			 has_global_variable = entente_deal_round_4_italy_iredentist_prop_1_won
             has_global_variable = entente_deal_round_4_italy_iredentist_prop_2_won
             has_global_variable = entente_deal_round_4_italy_iredentist_prop_3_won
		    }
	    }
	  c:GER = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
      c:AUS = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
	  c:ITA = {
          has_variable = entente_participant
		}	
	}
    
    scripted_button = italy_iredentist_1_button 
    scripted_button = italy_iredentist_2_button 
    scripted_button = italy_iredentist_3_button 

    immediate = {
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_4_italy_iredentist_prop_1 }
			}
			set_global_variable = {
				name = entente_deal_round_4_italy_iredentist_prop_1
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_4_italy_iredentist_prop_2 }
			} 
			set_global_variable = {
				name = entente_deal_round_4_italy_iredentist_prop_2
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_4_italy_iredentist_prop_3 }
			}
			set_global_variable = {
				name = entente_deal_round_4_italy_iredentist_prop_3
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_peace_deal_timer_round_4 }
			}
			set_global_variable = {
				name = entente_peace_deal_timer_round_4
				value = 12
			}
		}
    }

    complete = {
        OR = {
         has_global_variable = entente_deal_round_4_italy_iredentist_prop_1_won
         has_global_variable = entente_deal_round_4_italy_iredentist_prop_2_won
         has_global_variable = entente_deal_round_4_italy_iredentist_prop_3_won
        }
    }

    on_complete = {
        set_global_variable = entente_deal_round_4_complete
        If = { 
		  limit = { 
			c:FRA ?= this
		  }
		   c:ITA = {
            trigger_event = {
                id = entente_peace_deal.5
                days = 5
            }
           }
		}
    }

    on_monthly_pulse = {
        effect = {
            if = {
				limit = { 
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_4 >= 1
				}
				change_global_variable = {
					name = entente_peace_deal_timer_round_4
					add = -1
				}
			}
			if = {
				limit = {
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_4 <= 0
				}
				if = {
					limit = {
						NOT = {
							 has_global_variable = entente_deal_round_4_italy_iredentist_prop_1_won
                             has_global_variable = entente_deal_round_4_italy_iredentist_prop_2_won
                             has_global_variable = entente_deal_round_4_italy_iredentist_prop_3_won
						}
					}
					if = {
						limit = {
							global_var:entente_deal_round_4_italy_iredentist_prop_1 > global_var:entente_deal_round_4_italy_iredentist_prop_2
							global_var:entente_deal_round_4_italy_iredentist_prop_1 > global_var:entente_deal_round_4_italy_iredentist_prop_3
						}
						set_global_variable = entente_deal_round_4_italy_iredentist_prop_1_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_4_italy_iredentist_prop_2 > global_var:entente_deal_round_4_italy_iredentist_prop_1
							global_var:entente_deal_round_4_italy_iredentist_prop_2 > global_var:entente_deal_round_4_italy_iredentist_prop_3
						}
						set_global_variable = entente_deal_round_4_italy_iredentist_prop_2_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_4_italy_iredentist_prop_3 > global_var:entente_deal_round_4_italy_iredentist_prop_1
							global_var:entente_deal_round_4_italy_iredentist_prop_3 > global_var:entente_deal_round_4_italy_iredentist_prop_2
						}
						set_global_variable = entente_deal_round_4_italy_iredentist_prop_3_won
					}
					else_if = { #Tiebreak
						limit = {
							global_var:entente_deal_round_4_italy_iredentist_prop_1 = global_var:entente_deal_round_4_italy_iredentist_prop_2
							global_var:entente_deal_round_4_italy_iredentist_prop_1 = global_var:entente_deal_round_4_italy_iredentist_prop_3
							global_var:entente_deal_round_4_italy_iredentist_prop_2 = global_var:entente_deal_round_4_italy_iredentist_prop_3
						}
						set_global_variable = entente_deal_round_4_italy_iredentist_prop_2_won
					}
				}
			}
        }
    }

    weight = 100

	should_be_pinned_by_default = yes 
}

je_entente_peace_deal_round_5 = { #Round 5: what is taken from Italy

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_crises
    
	is_shown_when_inactive = {
	  has_variable = entente_participant
	  NOT = {
			has_global_variable = entente_deal_round_5_italy_defeat_prop_1_won
            has_global_variable = entente_deal_round_5_italy_defeat_prop_2_won
            has_global_variable = entente_deal_round_5_italy_defeat_prop_3_won
			has_global_variable = entente_deal_round_5_complete
		}
	  c:ITA = {
          has_variable = central_powers_participant
		}
	}

    possible = { 
	   has_variable = entente_participant
	   country_rank >= rank_value:great_power
	    NOT = {
		    OR = {
			 has_law = law_type:law_council_republic
			 country_has_primary_culture = cu:japanese
			 country_has_primary_culture = cu:han
			 has_global_variable = entente_deal_round_5_italy_defeat_prop_1_won
             has_global_variable = entente_deal_round_5_italy_defeat_prop_2_won
             has_global_variable = entente_deal_round_5_italy_defeat_prop_3_won
		    }
	    }
	  c:GER = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
     c:AUS = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
		c:ITA = {
          has_variable = central_powers_participant
		}	
	}
    
    scripted_button = italy_defeat_1_button 
    scripted_button = italy_defeat_2_button 
    scripted_button = italy_defeat_3_button 

    immediate = {
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_5_italy_defeat_prop_1 }
			}
			set_global_variable = {
				name = entente_deal_round_5_italy_defeat_prop_1
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_5_italy_defeat_prop_2 }
			} 
			set_global_variable = {
				name = entente_deal_round_5_italy_defeat_prop_2
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_5_italy_defeat_prop_3 }
			}
			set_global_variable = {
				name = entente_deal_round_5_italy_defeat_prop_3
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_peace_deal_timer_round_5 }
			}
			set_global_variable = {
				name = entente_peace_deal_timer_round_5
				value = 12
			}
		}
    }

    complete = {
        OR = {
         has_global_variable = entente_deal_round_5_italy_defeat_prop_1_won
         has_global_variable = entente_deal_round_5_italy_defeat_prop_2_won
         has_global_variable = entente_deal_round_5_italy_defeat_prop_3_won
        }
    }

    on_complete = {
        set_global_variable = entente_deal_round_5_complete
        If = { 
		  limit = { 
			c:FRA ?= this
		  }
		   c:ITA = {
            trigger_event = {
                id = entente_peace_deal.6
                days = 5
            }
           }
		}
    }

    on_monthly_pulse = {
        effect = {
            if = {
				limit = { 
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_5 >= 1
				}
				change_global_variable = {
					name = entente_peace_deal_timer_round_5
					add = -1
				}
			}
			if = {
				limit = {
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_5 <= 0
				}
				if = {
					limit = {
						NOT = {
							 has_global_variable = entente_deal_round_5_italy_defeat_prop_1_won
                             has_global_variable = entente_deal_round_5_italy_defeat_prop_2_won
                             has_global_variable = entente_deal_round_5_italy_defeat_prop_3_won
						}
					}
					if = {
						limit = {
							global_var:entente_deal_round_5_italy_defeat_prop_1 > global_var:entente_deal_round_5_italy_defeat_prop_2
							global_var:entente_deal_round_5_italy_defeat_prop_1 > global_var:entente_deal_round_5_italy_defeat_prop_3
						}
						set_global_variable = entente_deal_round_5_italy_defeat_prop_1_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_5_italy_defeat_prop_2 > global_var:entente_deal_round_5_italy_defeat_prop_1
							global_var:entente_deal_round_5_italy_defeat_prop_2 > global_var:entente_deal_round_5_italy_defeat_prop_3
						}
						set_global_variable = entente_deal_round_5_italy_defeat_prop_2_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_5_italy_defeat_prop_3 > global_var:entente_deal_round_5_italy_defeat_prop_1
							global_var:entente_deal_round_5_italy_defeat_prop_3 > global_var:entente_deal_round_5_italy_defeat_prop_2
						}
						set_global_variable = entente_deal_round_5_italy_defeat_prop_3_won
					}
					else_if = { #Tiebreak
						limit = {
							global_var:entente_deal_round_5_italy_defeat_prop_1 = global_var:entente_deal_round_5_italy_defeat_prop_2
							global_var:entente_deal_round_5_italy_defeat_prop_1 = global_var:entente_deal_round_5_italy_defeat_prop_3
							global_var:entente_deal_round_5_italy_defeat_prop_2 = global_var:entente_deal_round_5_italy_defeat_prop_3
						}
						set_global_variable = entente_deal_round_5_italy_defeat_prop_2_won
					}
				}
			}
        }
    }

    weight = 100

	should_be_pinned_by_default = yes 
}

je_entente_peace_deal_round_6 = { #Round 6: what Greece takes from Turkey

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_crises
    
	is_shown_when_inactive = {
	  has_variable = entente_participant
	  NOT = {
			has_global_variable = entente_deal_round_6_how_big_greece_prop_1_won
            has_global_variable = entente_deal_round_6_how_big_greece_prop_2_won
            has_global_variable = entente_deal_round_6_how_big_greece_prop_3_won
			has_global_variable = entente_deal_round_6_complete
		}
	  c:GRE = {
          has_variable = entente_participant
		}
	  c:TUR = {
          has_variable = central_powers_participant
		}	
	}

    possible = { 
	   has_variable = entente_participant
	   country_rank >= rank_value:great_power
	    NOT = {
		    OR = {
			 has_law = law_type:law_council_republic
			 country_has_primary_culture = cu:japanese
			 country_has_primary_culture = cu:han
			 has_global_variable = entente_deal_round_6_how_big_greece_prop_1_won
             has_global_variable = entente_deal_round_6_how_big_greece_prop_2_won
             has_global_variable = entente_deal_round_6_how_big_greece_prop_3_won
		    }
	    }
	  c:GER = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
      c:AUS = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
		c:GRE = {
          has_variable = entente_participant
		}	
		c:TUR = {
          has_variable = central_powers_participant
		}	
	}
    
    scripted_button = how_big_greece_1_button 
    scripted_button = how_big_greece_2_button 
    scripted_button = how_big_greece_3_button 

    immediate = {
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_6_how_big_greece_prop_1 }
			}
			set_global_variable = {
				name = entente_deal_round_6_how_big_greece_prop_1
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_6_how_big_greece_prop_2 }
			} 
			set_global_variable = {
				name = entente_deal_round_6_how_big_greece_prop_2
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_6_how_big_greece_prop_3 }
			}
			set_global_variable = {
				name = entente_deal_round_6_how_big_greece_prop_3
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_peace_deal_timer_round_6 }
			}
			set_global_variable = {
				name = entente_peace_deal_timer_round_6
				value = 12
			}
		}
    }

    complete = {
        OR = {
         has_global_variable = entente_deal_round_6_how_big_greece_prop_1_won
         has_global_variable = entente_deal_round_6_how_big_greece_prop_2_won
         has_global_variable = entente_deal_round_6_how_big_greece_prop_3_won
        }
    }

    on_complete = {
        set_global_variable = entente_deal_round_6_complete
        If = { 
		  limit = { 
			c:FRA ?= this
		  }
		   c:GRE = {
            trigger_event = {
                id = entente_peace_deal.7
                days = 5
            }
           }
		}
    }

    on_monthly_pulse = {
        effect = {
            if = {
				limit = { 
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_6 >= 1
				}
				change_global_variable = {
					name = entente_peace_deal_timer_round_6
					add = -1
				}
			}
			if = {
				limit = {
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_6 <= 0
				}
				if = {
					limit = {
						NOT = {
							 has_global_variable = entente_deal_round_6_how_big_greece_prop_1_won
                             has_global_variable = entente_deal_round_6_how_big_greece_prop_2_won
                             has_global_variable = entente_deal_round_6_how_big_greece_prop_3_won
						}
					}
					if = {
						limit = {
							global_var:entente_deal_round_6_how_big_greece_prop_1 > global_var:entente_deal_round_6_how_big_greece_prop_2
							global_var:entente_deal_round_6_how_big_greece_prop_1 > global_var:entente_deal_round_6_how_big_greece_prop_3
						}
						set_global_variable = entente_deal_round_6_how_big_greece_prop_1_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_6_how_big_greece_prop_2 > global_var:entente_deal_round_6_how_big_greece_prop_1
							global_var:entente_deal_round_6_how_big_greece_prop_2 > global_var:entente_deal_round_6_how_big_greece_prop_3
						}
						set_global_variable = entente_deal_round_6_how_big_greece_prop_2_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_6_how_big_greece_prop_3 > global_var:entente_deal_round_6_how_big_greece_prop_1
							global_var:entente_deal_round_6_how_big_greece_prop_3 > global_var:entente_deal_round_6_how_big_greece_prop_2
						}
						set_global_variable = entente_deal_round_6_how_big_greece_prop_3_won
					}
					else_if = { #Tiebreak
						limit = {
							global_var:entente_deal_round_6_how_big_greece_prop_1 = global_var:entente_deal_round_6_how_big_greece_prop_2
							global_var:entente_deal_round_6_how_big_greece_prop_1 = global_var:entente_deal_round_6_how_big_greece_prop_3
							global_var:entente_deal_round_6_how_big_greece_prop_2 = global_var:entente_deal_round_6_how_big_greece_prop_3
						}
						set_global_variable = entente_deal_round_6_how_big_greece_prop_2_won
					}
				}
			}
        }
    }

    weight = 100

	should_be_pinned_by_default = yes 
}

je_entente_peace_deal_round_7 = { #Round 7 : does an unified arab states forms or not ?
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_crises
    
	is_shown_when_inactive = {
	  has_variable = entente_participant
	  NOT = {
			has_global_variable = entente_deal_round_7_arab_states_prop_1_won
            has_global_variable = entente_deal_round_7_arab_states_prop_2_won
            has_global_variable = entente_deal_round_7_arab_states_prop_3_won
			has_global_variable = entente_deal_round_7_complete
		}
	  c:TUR = {
          has_variable = central_powers_participant
		}
	}

    possible = { 
	   has_variable = entente_participant
	   country_rank >= rank_value:great_power
	    NOT = {
		    OR = {
			 has_law = law_type:law_council_republic
			 country_has_primary_culture = cu:japanese
			 country_has_primary_culture = cu:han
			 has_global_variable = entente_deal_round_7_arab_states_prop_1_won
             has_global_variable = entente_deal_round_7_arab_states_prop_2_won
             has_global_variable = entente_deal_round_7_arab_states_prop_3_won
			 has_global_variable = entente_deal_round_7_complete
		    }
	    }
	  c:GER = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
      c:AUS = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
		c:TUR = {
          has_variable = central_powers_participant
		}
	}
    
    scripted_button = arab_states_1_button 
    scripted_button = arab_states_2_button 
    scripted_button = arab_states_3_button 

    immediate = {
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_7_arab_states_prop_1 }
			}
			set_global_variable = {
				name = entente_deal_round_7_arab_states_prop_1
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_7_arab_states_prop_2 }
			} 
			set_global_variable = {
				name = entente_deal_round_7_arab_states_prop_2
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_7_arab_states_prop_3 }
			}
			set_global_variable = {
				name = entente_deal_round_7_arab_states_prop_3
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_peace_deal_timer_round_7 }
			}
			set_global_variable = {
				name = entente_peace_deal_timer_round_7
				value = 12
			}
		}
    }

    complete = {
        OR = {
         has_global_variable = entente_deal_round_7_arab_states_prop_1_won
         has_global_variable = entente_deal_round_7_arab_states_prop_2_won
         has_global_variable = entente_deal_round_7_arab_states_prop_3_won
        }
    }

    on_complete = {
        set_global_variable = entente_deal_round_7_complete
        If = { 
		  limit = { 
			c:FRA ?= this
		  }
		   c:TUR = {
            trigger_event = {
                id = entente_peace_deal.8
                days = 5
            }
           }
		}
    }

    on_monthly_pulse = {
        effect = {
            if = {
				limit = { 
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_7 >= 1
				}
				change_global_variable = {
					name = entente_peace_deal_timer_round_7
					add = -1
				}
			}
			if = {
				limit = {
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_7 <= 0
				}
				if = {
					limit = {
						NOT = {
							 has_global_variable = entente_deal_round_7_arab_states_prop_1_won
                             has_global_variable = entente_deal_round_7_arab_states_prop_2_won
                             has_global_variable = entente_deal_round_7_arab_states_prop_3_won
						}
					}
					if = {
						limit = {
							global_var:entente_deal_round_7_arab_states_prop_1 > global_var:entente_deal_round_7_arab_states_prop_2
							global_var:entente_deal_round_7_arab_states_prop_1 > global_var:entente_deal_round_7_arab_states_prop_3
						}
						set_global_variable = entente_deal_round_7_arab_states_prop_1_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_7_arab_states_prop_2 > global_var:entente_deal_round_7_arab_states_prop_1
							global_var:entente_deal_round_7_arab_states_prop_2 > global_var:entente_deal_round_7_arab_states_prop_3
						}
						set_global_variable = entente_deal_round_7_arab_states_prop_2_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_7_arab_states_prop_3 > global_var:entente_deal_round_7_arab_states_prop_1
							global_var:entente_deal_round_7_arab_states_prop_3 > global_var:entente_deal_round_7_arab_states_prop_2
						}
						set_global_variable = entente_deal_round_7_arab_states_prop_3_won
					}
					else_if = { #Tiebreak
						limit = {
							global_var:entente_deal_round_7_arab_states_prop_1 = global_var:entente_deal_round_7_arab_states_prop_2
							global_var:entente_deal_round_7_arab_states_prop_1 = global_var:entente_deal_round_7_arab_states_prop_3
							global_var:entente_deal_round_7_arab_states_prop_2 = global_var:entente_deal_round_7_arab_states_prop_3
						}
						set_global_variable = entente_deal_round_7_arab_states_prop_3_won
					}
				}
			}
        }
    }

    weight = 100

	should_be_pinned_by_default = yes 
}

je_entente_peace_deal_round_8 = { #Round 8: what Russia gets 
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_crises
    
	is_shown_when_inactive = {
	  has_variable = entente_participant
	  NOT = {
			has_global_variable = entente_deal_round_8_how_big_russia_prop_1_won
            has_global_variable = entente_deal_round_8_how_big_russia_prop_2_won
            has_global_variable = entente_deal_round_8_how_big_russia_prop_3_won
			has_global_variable = entente_deal_round_8_complete
			has_global_variable = russian_revolution_2
		}
	}

    possible = { 
	   has_variable = entente_participant
	   country_rank >= rank_value:great_power
	    NOT = {
		    OR = {
			 has_law = law_type:law_council_republic
			 country_has_primary_culture = cu:japanese
			 country_has_primary_culture = cu:han
			 has_global_variable = entente_deal_round_8_how_big_russia_prop_1_won
             has_global_variable = entente_deal_round_8_how_big_russia_prop_2_won
             has_global_variable = entente_deal_round_8_how_big_russia_prop_3_won
			 has_global_variable = entente_deal_round_8_complete
			 has_global_variable = russian_revolution_2
		    }
	    }
	  c:GER = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
      c:AUS = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
	  c:RUS = {
		  NOT = {
			has_law = law_type:law_council_republic
		  }
		}
	}
    
    scripted_button = how_big_russia_1_button 
    scripted_button = how_big_russia_2_button 
    scripted_button = how_big_russia_3_button 

    immediate = {
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_8_how_big_russia_prop_1 }
			}
			set_global_variable = {
				name = entente_deal_round_8_how_big_russia_prop_1
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_8_how_big_russia_prop_2 }
			} 
			set_global_variable = {
				name = entente_deal_round_8_how_big_russia_prop_2
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_8_how_big_russia_prop_3 }
			}
			set_global_variable = {
				name = entente_deal_round_8_how_big_russia_prop_3
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_peace_deal_timer_round_8 }
			}
			set_global_variable = {
				name = entente_peace_deal_timer_round_8
				value = 12
			}
		}
    }

    complete = {
        OR = {
         has_global_variable = entente_deal_round_8_how_big_russia_prop_1_won
         has_global_variable = entente_deal_round_8_how_big_russia_prop_2_won
         has_global_variable = entente_deal_round_8_how_big_russia_prop_3_won
        }
    }

    on_complete = {
        set_global_variable = entente_deal_round_8_complete
        If = { 
		  limit = { 
			c:FRA ?= this
		  }
		  c:RUS = {
            trigger_event = {
                id = entente_peace_deal.9
                days = 5
            }
           }
		}
    }

    on_monthly_pulse = {
        effect = {
            if = {
				limit = { 
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_8 >= 1
				}
				change_global_variable = {
					name = entente_peace_deal_timer_round_8
					add = -1
				}
			}
			if = {
				limit = {
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_8 <= 0
				}
				if = {
					limit = {
						NOT = {
							 has_global_variable = entente_deal_round_8_how_big_russia_prop_1_won
                             has_global_variable = entente_deal_round_8_how_big_russia_prop_2_won
                             has_global_variable = entente_deal_round_8_how_big_russia_prop_3_won
						}
					}
					if = {
						limit = {
							global_var:entente_deal_round_8_how_big_russia_prop_1 > global_var:entente_deal_round_8_how_big_russia_prop_2
							global_var:entente_deal_round_8_how_big_russia_prop_1 > global_var:entente_deal_round_8_how_big_russia_prop_3
						}
						set_global_variable = entente_deal_round_8_how_big_russia_prop_1_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_8_how_big_russia_prop_2 > global_var:entente_deal_round_8_how_big_russia_prop_1
							global_var:entente_deal_round_8_how_big_russia_prop_2 > global_var:entente_deal_round_8_how_big_russia_prop_3
						}
						set_global_variable = entente_deal_round_8_how_big_russia_prop_2_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_8_how_big_russia_prop_3 > global_var:entente_deal_round_8_how_big_russia_prop_1
							global_var:entente_deal_round_8_how_big_russia_prop_3 > global_var:entente_deal_round_8_how_big_russia_prop_2
						}
						set_global_variable = entente_deal_round_8_how_big_russia_prop_3_won
					}
					else_if = { #Tiebreak
						limit = {
							global_var:entente_deal_round_8_how_big_russia_prop_1 = global_var:entente_deal_round_8_how_big_russia_prop_2
							global_var:entente_deal_round_8_how_big_russia_prop_1 = global_var:entente_deal_round_8_how_big_russia_prop_3
							global_var:entente_deal_round_8_how_big_russia_prop_2 = global_var:entente_deal_round_8_how_big_russia_prop_3
						}
						set_global_variable = entente_deal_round_8_how_big_russia_prop_2_won
					}
				}
			}
        }
    }

    weight = 100

	should_be_pinned_by_default = yes 
}

je_entente_peace_deal_round_9 = { #Round 9: what Japan and USA gets from german colonies in asia
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_crises
    
	is_shown_when_inactive = {
	  has_variable = entente_participant
	  NOT = {
			has_global_variable = entente_deal_round_9_how_big_japan_prop_1_won
            has_global_variable = entente_deal_round_9_how_big_japan_prop_2_won
            has_global_variable = entente_deal_round_9_how_big_japan_prop_3_won
			has_global_variable = entente_deal_round_9_complete
		}
		c:JAP = {
			has_variable = entente_participant
		}
		c:USA = {
			has_variable = entente_participant
		}
	}

    possible = { 
	   has_variable = entente_participant
	   country_rank >= rank_value:great_power
	    NOT = {
		    OR = {
			 has_law = law_type:law_council_republic
			 country_has_primary_culture = cu:han
			 has_global_variable = entente_deal_round_9_how_big_japan_prop_1_won
             has_global_variable = entente_deal_round_9_how_big_japan_prop_2_won
             has_global_variable = entente_deal_round_9_how_big_japan_prop_3_won
			 has_global_variable = entente_deal_round_9_complete
		    }
	    }
	  c:GER = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
      c:AUS = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
	  c:JAP = {
			has_variable = entente_participant
		}
	  c:USA = {
			has_variable = entente_participant
		}
	}
    
    scripted_button = how_big_japan_1_button 
    scripted_button = how_big_japan_2_button 
    scripted_button = how_big_japan_3_button 

    immediate = {
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_9_how_big_japan_prop_1 }
			}
			set_global_variable = {
				name = entente_deal_round_9_how_big_japan_prop_1
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_9_how_big_japan_prop_2 }
			} 
			set_global_variable = {
				name = entente_deal_round_9_how_big_japan_prop_2
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_9_how_big_japan_prop_3 }
			}
			set_global_variable = {
				name = entente_deal_round_9_how_big_japan_prop_3
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_peace_deal_timer_round_9 }
			}
			set_global_variable = {
				name = entente_peace_deal_timer_round_9
				value = 12
			}
		}
    }

    complete = {
        OR = {
         has_global_variable = entente_deal_round_9_how_big_japan_prop_1_won
         has_global_variable = entente_deal_round_9_how_big_japan_prop_2_won
         has_global_variable = entente_deal_round_9_how_big_japan_prop_3_won
        }
    }

    on_complete = {
        set_global_variable = entente_deal_round_9_complete
        If = { 
		  limit = { 
			c:FRA ?= this
		  }
		   c:JAP = {
            trigger_event = {
                id = entente_peace_deal.10
                days = 5
            }
           }
		}
    }

    on_monthly_pulse = {
        effect = {
            if = {
				limit = { 
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_9 >= 1
				}
				change_global_variable = {
					name = entente_peace_deal_timer_round_9
					add = -1
				}
			}
			if = {
				limit = {
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_9 <= 0
				}
				if = {
					limit = {
						NOT = {
							 has_global_variable = entente_deal_round_9_how_big_japan_prop_1_won
                             has_global_variable = entente_deal_round_9_how_big_japan_prop_2_won
                             has_global_variable = entente_deal_round_9_how_big_japan_prop_3_won
						}
					}
					if = {
						limit = {
							global_var:entente_deal_round_9_how_big_japan_prop_1 > global_var:entente_deal_round_9_how_big_japan_prop_2
							global_var:entente_deal_round_9_how_big_japan_prop_1 > global_var:entente_deal_round_9_how_big_japan_prop_3
						}
						set_global_variable = entente_deal_round_9_how_big_japan_prop_1_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_9_how_big_japan_prop_2 > global_var:entente_deal_round_9_how_big_japan_prop_1
							global_var:entente_deal_round_9_how_big_japan_prop_2 > global_var:entente_deal_round_9_how_big_japan_prop_3
						}
						set_global_variable = entente_deal_round_9_how_big_japan_prop_2_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_9_how_big_japan_prop_3 > global_var:entente_deal_round_9_how_big_japan_prop_1
							global_var:entente_deal_round_9_how_big_japan_prop_3 > global_var:entente_deal_round_9_how_big_japan_prop_2
						}
						set_global_variable = entente_deal_round_9_how_big_japan_prop_3_won
					}
					else_if = { #Tiebreak
						limit = {
							global_var:entente_deal_round_9_how_big_japan_prop_1 = global_var:entente_deal_round_9_how_big_japan_prop_2
							global_var:entente_deal_round_9_how_big_japan_prop_1 = global_var:entente_deal_round_9_how_big_japan_prop_3
							global_var:entente_deal_round_9_how_big_japan_prop_2 = global_var:entente_deal_round_9_how_big_japan_prop_3
						}
						set_global_variable = entente_deal_round_9_how_big_japan_prop_2_won
					}
				}
			}
        }
    }

    weight = 100

	should_be_pinned_by_default = yes 
}

je_entente_peace_deal_round_10 = { #Round 10: who gets which central power colonies ?
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_crises
    
	is_shown_when_inactive = {
	  has_variable = entente_participant
	  NOT = {
			has_global_variable = entente_deal_round_10_german_colonies_prop_1_won
            has_global_variable = entente_deal_round_10_german_colonies_prop_2_won
            has_global_variable = entente_deal_round_10_german_colonies_prop_3_won
			has_global_variable = entente_deal_round_10_complete
		}
		c:ITA = {
			has_variable = entente_participant
		}
	}

    possible = { 
	   has_variable = entente_participant
	   country_rank >= rank_value:great_power
	    NOT = {
		    OR = {
			 has_law = law_type:law_council_republic
			 country_has_primary_culture = cu:japanese
			 country_has_primary_culture = cu:han
			 has_global_variable = entente_deal_round_10_german_colonies_prop_1_won
             has_global_variable = entente_deal_round_10_german_colonies_prop_2_won
             has_global_variable = entente_deal_round_10_german_colonies_prop_3_won
			 has_global_variable = entente_deal_round_10_complete
		    }
	    }
	  c:GER = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
      c:AUS = {
          has_variable = central_powers_participant
		  has_modifier = country_humiliated
        } 
	  c:ITA = {
			has_variable = entente_participant
		}
	}
    
    scripted_button = german_colonies_1_button 
    scripted_button = german_colonies_2_button 
    scripted_button = german_colonies_3_button 

    immediate = {
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_10_german_colonies_prop_1 }
			}
			set_global_variable = {
				name = entente_deal_round_10_german_colonies_prop_1
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_10_german_colonies_prop_2 }
			} 
			set_global_variable = {
				name = entente_deal_round_10_german_colonies_prop_2
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_deal_round_10_german_colonies_prop_3 }
			}
			set_global_variable = {
				name = entente_deal_round_10_german_colonies_prop_3
				value = 0
			}
		}
		if = {
			limit = {
				NOT = { exists = global_var:entente_peace_deal_timer_round_10 }
			}
			set_global_variable = {
				name = entente_peace_deal_timer_round_10
				value = 12
			}
		}
    }

    complete = {
        OR = {
         has_global_variable = entente_deal_round_10_german_colonies_prop_1_won
         has_global_variable = entente_deal_round_10_german_colonies_prop_2_won
         has_global_variable = entente_deal_round_10_german_colonies_prop_3_won
        }
    }

    on_complete = {
        set_global_variable = entente_deal_round_10_complete
        If = { 
		  limit = { 
			c:FRA ?= this
		  }
		   c:FRA = {
            trigger_event = {
                id = entente_peace_deal.11
                days = 5
            }
           }
		}
    }

    on_monthly_pulse = {
        effect = {
            if = {
				limit = { 
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_10 >= 1
				}
				change_global_variable = {
					name = entente_peace_deal_timer_round_10
					add = -1
				}
			}
			if = {
				limit = {
					c:FRA ?= this
					global_var:entente_peace_deal_timer_round_10 <= 0
				}
				if = {
					limit = {
						NOT = {
							 has_global_variable = entente_deal_round_10_german_colonies_prop_1_won
                             has_global_variable = entente_deal_round_10_german_colonies_prop_2_won
                             has_global_variable = entente_deal_round_10_german_colonies_prop_3_won
						}
					}
					if = {
						limit = {
							global_var:entente_deal_round_10_german_colonies_prop_1 > global_var:entente_deal_round_10_german_colonies_prop_2
							global_var:entente_deal_round_10_german_colonies_prop_1 > global_var:entente_deal_round_10_german_colonies_prop_3
						}
						set_global_variable = entente_deal_round_10_german_colonies_prop_1_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_10_german_colonies_prop_2 > global_var:entente_deal_round_10_german_colonies_prop_1
							global_var:entente_deal_round_10_german_colonies_prop_2 > global_var:entente_deal_round_10_german_colonies_prop_3
						}
						set_global_variable = entente_deal_round_10_german_colonies_prop_2_won
					}
					else_if = {
						limit = {
							global_var:entente_deal_round_10_german_colonies_prop_3 > global_var:entente_deal_round_10_german_colonies_prop_1
							global_var:entente_deal_round_10_german_colonies_prop_3 > global_var:entente_deal_round_10_german_colonies_prop_2
						}
						set_global_variable = entente_deal_round_10_german_colonies_prop_3_won
					}
					else_if = { #Tiebreak
						limit = {
							global_var:entente_deal_round_10_german_colonies_prop_1 = global_var:entente_deal_round_10_german_colonies_prop_2
							global_var:entente_deal_round_10_german_colonies_prop_1 = global_var:entente_deal_round_10_german_colonies_prop_3
							global_var:entente_deal_round_10_german_colonies_prop_2 = global_var:entente_deal_round_10_german_colonies_prop_3
						}
						set_global_variable = entente_deal_round_10_german_colonies_prop_1_won
					}
				}
			}
        }
    }

    weight = 100

	should_be_pinned_by_default = yes 
}

#Round 1: is Germany dislocated ?
#Round 2: how big is German war reparation
#Round 3: how big Poland becomes ?
#Round 4: does Italy takes iredentist states from Austria ?
#Round 5: what is taken from Italy
#Round 6: what Greece takes from Turkey
#Round 7: does an unified arab states froms or not ?
#Round 8: what Russia gets 
#Round 9: what Japan gets from german colonies in asia
#Round 10: who gets which central power colonies ?